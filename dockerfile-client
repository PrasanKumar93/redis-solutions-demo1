FROM node:18.14.2-alpine

ARG BUILD_BASE_PATH
ARG FRONTEND_CLIENT_PORT

ARG CDN_HOST
ARG CDN_PORT
ARG API_GATEWAY_URI
ENV CDN_HOST=${CDN_HOST}
ENV CDN_PORT=${CDN_PORT}
ENV API_GATEWAY_URI=${API_GATEWAY_URI}

WORKDIR /app

COPY $BUILD_BASE_PATH/package.json  .

RUN npm install

COPY $BUILD_BASE_PATH/ .

RUN npm run build

CMD npm start -- -p $FRONTEND_CLIENT_PORT
